### <a name="_b7urdng99y53"></a>**Название задачи:** 
ADR-003: Онлайн-подача заявок на кредит
### <a name="_hjk0fkfyohdk"></a>**Автор:**
Команда цифровой трансформации
### <a name="_uanumrh8zrui"></a>**Дата:**
13.02.2026
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Здесь описаны верхнеуровневые Use Cases. Они оформлены в виде таблицы с пошаговым описанием:

| **№** | **Действующие лица или системы**                                             | **Use Case**                                   | **Описание**                                                                                                                                                                                                                                                                                    |
|:-----:|:-----------------------------------------------------------------------------|:-----------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  UC1  | Потенциальный клиент, Сайт банка, Сервис кредитных заявок                    | Подача заявки на кредит с сайта                | 1. Потенциальный клиент заходит на сайт банка<br>2. Заполняет форму заявки (ФИО, телефон, паспорт)<br>3. Сайт передает заявку в сервис кредитных заявок<br>4. Сервис запрашивает предварительное решение у системы скоринга<br>5. Клиент получает предварительное решение и СМС-уведомление     |
|  UC2  | Клиент банка, Интернет-банк, Сервис кредитных заявок                         | Подача заявки на заранее одобренный кредит     | 1. Клиент авторизуется в интернет-банке<br>2. Система отображает персонализированные заранее одобренные предложения<br>3. Клиент выбирает подходящее предложение и заполняет заявку<br>4. Заявка обрабатывается в ускоренном режиме<br>5. Клиент получает решение в течение дня                 |
|  UC3  | Сервис кредитных заявок, Система кредитного скоринга, Бюро кредитных историй | Предварительная оценка кредитоспособности      | 1. Сервис кредитных заявок получает данные клиента<br>2. Передает данные в систему кредитного скоринга<br>3. Система скоринга запрашивает данные из бюро кредитных историй<br>4. Формируется предварительное решение на основе скоринга<br>5. Результат возвращается в сервис кредитных заявок  |
|  UC4  | Сервис кредитных заявок, Кредитный конвейер, Менеджер бэк-офиса              | Ускоренная обработка заранее одобренных заявок | 1. Заявка с флагом "заранее одобрена" попадает в кредитный конвейер<br>2. Система автоматически определяет приоритет обработки<br>3. Менеджер бэк-офиса обрабатывает заявку в первоочередном порядке<br>4. Решение принимается в течение дня<br>5. Результат передается обратно в сервис заявок |
|  UC5  | Сервис кредитных заявок, СМС-шлюз, Клиент                                    | Уведомления о статусе заявки                   | 1. При изменении статуса заявки система генерирует событие<br>2. Сервис формирует текст уведомления<br>3. Отправляет СМС через телеком-оператора<br>4. Клиент получает уведомление о текущем статусе                                                                                            |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Здесь описаны нефункциональные требования и архитектурно значимые требования.

| **№** | **Требование**                                                                        |
|:-----:|:--------------------------------------------------------------------------------------|
|  R1   | Доступность 99.9% в режиме 24/7 для обеспечения круглосуточного приема заявок         |
|  R2   | Отказоустойчивость при сбоях ЦОД с автоматическим переключением на резервные мощности |
|  P1   | Отклик интерфейса подачи заявки не более 500 мс для улучшения пользовательского опыта |
|  P2   | Изоляция от нагрузки на АБС - использование промежуточного слоя данных                |
|  P3   | Горизонтальное масштабирование новых компонентов для обработки растущей нагрузки      |
|  +R1  | Шифрование трафика (HTTPS) для передачи персональных данных и паспортных данных       |
|  +R2  | Соответствие законодательству о защите персональных данных (152-ФЗ)                   |
|  +R3  | Приоритет существующих технологий (MS SQL, Oracle) и экспертизы (Java)                |
|  +R4  | Переход на микросервисную архитектуру - создание отдельного сервиса кредитных заявок  |
|  +R5  | Несовместимость текущей платформы интернет-банка с Kafka - использование REST API     |
|  +R6  | Избежание доработок ядра интернет-банка подрядчиком                                   |
|  +R7  | Обмен АБС <-> Кредитный конвейер только раз в сутки                                   |
|  +R8  | АБС масштабируется только вертикально - минимизация прямых обращений                  |

### <a name="_qmphm5d6rvi3"></a>**Решение**
Для решения задачи онлайн-подачи кредитных заявок создается новый микросервис "Сервис кредитных заявок", который интегрируется с существующими системами банка. Решение обеспечивает прием заявок как с сайта, так и из интернет-банка, с возможностью ускоренной обработки заранее одобренных заявок.

#### [Диаграмма контекста]()

#### [Диаграмма контейнеров]()

#### Логика принятия решений и выбор технологий:

- Микросервисная архитектура: создается отдельный сервис кредитных заявок в соответствии с требованием +R4, что позволяет независимо развивать кредитный функционал без влияния на существующие системы.
- Технологический стек: Выбран стек Java / Spring Boot в соответствии с требованием +R3 об использовании существующей экспертизы команды.
- Интеграция: используется REST API вместо Kafka из-за ограничения +R5 о несовместимости интернет-банка с Kafka.
- Кэширование: используется Redis для кэширования заранее одобренных предложений, что обеспечивает быстрый отклик (требование P1) при отображении персонализированных предложений в интернет-банке.
- Асинхронная синхронизация с АБС: планировщик выполняет ежедневную синхронизацию в соответствии с ограничением +R7 и минимизирует нагрузку на АБС (+R8).
- Изоляция от АБС: реализация промежуточного слоя данных обеспечивает соблюдение требования P2 об изоляции от нагрузки на АБС.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Здесь описаны наиболее важные альтернативные решения.

1. Модификация существующего интернет-банка.
    - Причина отказа: нарушает требование +R6 о недопустимости доработок ядра интернет-банка подрядчиком. Увеличивает связанность и усложняет независимое развитие кредитного функционала.
2. Прямая интеграция с кредитным конвейером без промежуточного сервиса.
    - Причина отказа: не обеспечивает требования P1 по времени отклика для предварительного решения, а также создает прямую зависимость фронтальных систем от внутренних BPM-процессов.
3. Синхронная интеграция с АБС в реальном времени
    - Причина отказа: нарушает ограничения +R7 (обмен только раз в сутки) и +R8 (вертикальное масштабирование АБС), создает риск перегрузки критической системы банка.
4. Монолитная реализация в рамках существующих систем
    - Причина отказа: противоречит стратегическому требованию +R4 о переходе на микросервисную архитектуру, не обеспечивает гибкость и независимость развития.
5. Использование Kafka для интеграций
    - Причина отказа: ограничение +R5 о несовместимости интернет-банка с Kafka требует использования REST API для обеспечения совместимости.

**Недостатки, ограничения, риски**

- Дублирование данных клиентов между АБС и сервисом заявок может привести к проблемам консистентности.
- Сложность обеспечения актуальности заранее одобренных предложений при ежедневной синхронизации.
- Зависимость от множества внешних систем увеличивает количество точек отказа.
- Ежедневная синхронизация с АБС (+R7) ограничивает актуальность данных о клиентах в течение дня.
- Вертикальное масштабирование АБС (+R8) ограничивает возможности увеличения нагрузки на основную систему банка.
- Существующая экспертиза Java (+R3) ограничивает выбор современных технологий для отдельных компонентов.
- Безопасность персональных данных: передача паспортных данных через API требует строгого соблюдения требований +R1 и +R2.
- Производительность системы скоринга: внешние запросы к бюро кредитных историй могут создавать задержки в обработке заявок.
- Интеграционные сбои: отказ любой из интегрируемых систем может привести к недоступности сервиса.
- Масштабирование: при росте нагрузки потребуется горизонтальное масштабирование сервисов (P3).
- Операционная сложность: необходимость мониторинга и поддержки дополнительных микросервисов и интеграций.
